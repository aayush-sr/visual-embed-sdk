= Embed full application
:toc: true

:page-title: Embed full application
:page-pageid: full-embed
:page-description: You can embed full ThoughtSpot experience in your application and allow your users to create content for live analytics.

To integrate full ThoughtSpot experience in your application, you can use the full app embedding method. 

The full app embedding allows you to integrate many features and pages of the ThoughtSpot application, and provide your users the ability to perform the following tasks:

* create answers and pinboards
* share objects with other users
* upload data 
* relate uploaded data to existing worksheets
* use saved answers
* use SpotIQ

However, your application users will not have access to the following features in the embedded ThoughtSpot instance:

* create worksheets
* create views
* modify profiles
* view the Help Center

To embed the full ThoughtSpot application in your app, website, or product, complete the steps described in the following sections.  

=== Import the AppEmbed package
Import the AppEmbed SDK library to your application environment:

[source,javascript]
----
import { AppEmbed, Page, AuthType, init } from '@thoughtspot/visual-embed-sdk';
----

=== Add the embed domain

To allow your client application to connect to ThoughtSpot:

. Configure the URL with ThoughtSpot hostname or IP address.
. Specify the authentication method to use for authenticating application users.

include::{path}/embed-auth-config.adoc[]

For more information, see xref:embed-authentication.adoc[Embed user authentication].

=== Create an instance of the AppEmbed object

Create an instance of the AppEmbed object and pass parameters to set a page view.

[source,javascript]
----
const appEmbed = new AppEmbed(document.getElementById('ts-embed'), {
	frameParams: {
		width: '100%',
		height: '100%',
	},
	disabledActions: [],
	disabledActionReason: '<reason for disabling>'
	hiddenActions: [],
	showPrimaryNavbar: true,
	pageId: Page.Data,
	path: '<url-string>',
	runtimeFilters: [],
},
});
----
frameParams:: Sets the `width` and `height` dimensions to render the pages in the web application. You can set the `width` and `height` attribute values in pixels or as a percentage. 

disabledActions _optional_::
_Array of strings_. The actions that you want to show as disabled in the embedded ThoughtSpot UI.
+

For example, to disable the *download* action from the *More* (*...*) menu on the pinboard or visualization page, specify `Action.Download` in the `disabledActions` attribute.

+
[source,JavaScript]
----
disabledActions: [Action.Download]
----

////
+
++++
<a href="{{previewPrefix}}/playground/fullApp?modifyActions=true" id="preview-in-playground" target="_blank">Try it in Playground</a>
++++

+
////

For a complete list of action menu items and the corresponding strings, see link:{{visualEmbedSDKPrefix}}/enums/action.html[Action, window=_blank].


[NOTE]
====
If you want to disable a xref:customize-actions-menu.adoc[custom action], make sure you specify the ID of the custom action in the `disabledActions` attribute.

For example, if the custom action ID is set as *send-email*, use `send-email` in the `disabledActions` attribute to disable this action on a pinboard or answer page.
====

disabledActionReason _optional_::
_String_. The text to show for disabled actions. The text string specified in `disabledActionReason` shows as a tooltip when a user hovers over a disabled action in the embedded UI. For example, if you have disabled the `Download` action and you intend to enable this action for only authorized users, you can specify `disabledActionReason` as `Contact your administrator to enable this feature`.

hiddenActions _optional_::
_Array of strings_. The action menu items to hide on a pinboard or visualization page.
+

For example, to hide the *Download* action from the *More* menu image:./images/icon-more-10px.png[the more options menu], specify `Action.Download` in the `hiddenActions` attribute.

+
[source,JavaScript]
+
----
hiddenActions: [Action.Download]
----

////
+
++++
<a href="{{previewPrefix}}/playground/fullApp?modifyActions=true" id="preview-in-playground" target="_blank">Try it in Playground</a>
++++

+
////
For a complete list of action menu items and the corresponding strings, see link:{{visualEmbedSDKPrefix}}/enums/action.html[Action, window=_blank].

[NOTE]
====
If you want to hide a xref:customize-actions-menu.adoc[custom action], make sure you specify the ID of the custom action in the `hiddenActions` attribute.

For example, if the custom action ID is set as *send-email*, use `send-email` in the `hiddenActions` attribute to hide this action on a pinboard or answer page.
====

showPrimaryNavbar  [small]_optional_::   
_Boolean_. Shows or hides the ThoughtSpot navigation bar. By default, the navigation bar is hidden.
////
+
++++
<a href="{{previewPrefix}}/playground/fullApp?showNavBar=true" id="preview-in-playground" target="_blank">Preview in Playground</a>
++++
////
path::
_String_. The URL path of the ThoughtSpot application page to embed. 

[NOTE]
If both `path` and `pageId` attributes are defined, the path definition takes precedence.

pageId::
The unique identifier for the ThoughtSpot application page. The value specified in the `pageId` attribute will be set as the active tab, which is displayed by default when the embedded ThoughtSpot UI loads. Valid values are:

`*Page.Search*`;;

Displays the page showing ThoughtSpot search bar

`*Page.Answers*`;;

Displays the saved search answers (*Answers*) page

`*Page.Pinboards*`;;

Displays the *Pinboards* page

`*Page.Data*`;;
 
Displays the *Data* page

`*Page.Home*`;;

Displays the *Home* page
////
+
++++
<a href="{{previewPrefix}}/playground/fullApp?pageId=search" id="preview-in-playground" target="_blank">Preview in Playground</a>
++++
////
runtimeFilters [small]_optional_::
Runtime filters to apply when the pinboard or visualization page loads.
Runtime filters provide the ability to pass filter specifications in the URL query parameters and filter data at the time of retrieval.  
+
For example, to sort values equal to `100000` in the `Revenue` column for a visualization in a pinboard, you can pass the runtime filter in the URL query parameters as shown here:
+
[source,javascript]
----
runtimeFilters: [{
	columnName: 'Revenue',
	operator: 'EQ',
	values: [100000]
}, ]
----

////
++++
<a href="{{previewPrefix}}/playground/fullApp?runtimeFilters=true" id="preview-in-playground" target="_blank">Try it in Playground</a>
++++
////

include::{path}/runtime-filter.adoc[]

For more information about the supported data types and how to use runtime filters, see xref:runtime-filters.adoc[Runtime filters].


=== Define a method to process callback custom actions payload

include::{path}/callback-payload.adoc[]

=== Subscribe to events

Register event listeners.

[source, javascript]
----
appEmbed.on(EmbedEvent.init, showLoader)
appEmbed.on(EmbedEvent.load, hideLoader)
appEmbed.on(EmbedEvent.Error)
----

For a complete list of event types that you can register, see  link:{{visualEmbedSDKPrefix}}/enums/embedevent.html[EmbedEvent, window=_blank].

=== Render the embedded application

Render the embedded content.
[source, javascript]
----
appEmbed.render();
----

=== Test your embedding

To verify the ThoughtSpot application integration, perform the following tests:

* Load your application.
* Verify if the page you set as the active tab opens when you load the application.
* Verify if the tabs are displayed correctly.
* Verify if the page view parameters, such as hiding or showing the data source panel, function as expected.
* If you have disabled a menu item on a ThoughtSpot application page, verify if the menu command is disabled.

== Additional resources

* For code examples, see xref:code-samples.adoc[Code samples].
* For more information about the SDK APIs and attributes, see xref:sdk-reference.adoc[Visual Embed SDK Reference].
