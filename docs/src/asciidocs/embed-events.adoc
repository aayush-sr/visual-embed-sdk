= Interact with events
:toc: true
:toclevels: 1

:page-title: Embed events
:page-pageid: events
:page-description: You can subscribe to events emitted by the embedded objects and the host application.

ThoughtSpot supports a range of events that your app can listen to and respond to with an appropriate action. The embedded ThoughtSpot components emit events when they initialize and load, and when a user executes an action inside these components. The host application can also trigger events within the embedded ThoughtSpot objects, causing an alert or other action.

== How to register, handle, and trigger events

Before you begin, make sure you import the events library from the Visual Embed SDK package.

[source,javascript]
----
import { EmbedEvent, HostEvent } from '@thoughtspot/visual-embed-sdk';
----

The following code snippet shows how to register the `Init` event for the embedded ThoughtSpot Liveboards.

[source, javascript]
----
liveboardEmbed.on(EmbedEvent.Init, showLoader)
----

The `Init` event is generated when the embedded object rendering initializes. In the above example, a `showLoader` function is called to show a loader when the `Init` event triggers.

You can also subscribe to the `AuthInit` event to be notified when user authentication is successful, and `AuthExpire` to trigger an alert when an authenticated session expires.

[source, javascript]
----
appEmbed.on(EmbedEvent.AuthInit)
----

In the following example, the `AuthExpire` calls the `showAuthExpired` function to show a banner when an authenticated session expires.

[source, javascript]
----
appEmbed.on(EmbedEvent.AuthExpire, showAuthExpired)
----

Host events use the `.trigger()` method to send the event message to the ThoughtSpot embedded components.

[source, javascript]
----
liveboardEmbed.trigger(HostEvent.UpdateRuntimeFilters, [{
    columnName: "state",
    operator: "EQ",
    values: ["michigan"]
}]);
----

=== Custom action events

If you have added a xref:customize-actions-menu.adoc[custom action], you must register an event handler to send data in a payload when the custom action is triggered:

[source, javascript]
----
searchEmbed.on(EmbedEvent.customAction, payload => {
    const data = payload.data;
    if (data.id === 'insert Custom Action ID here') {
        console.log('Custom Action event:', data.embedAnswerData);
    }
})
----

== Unsubscribe from an event

The following example shows how to unsubscribe from an event:

[source, javascript]
----
appEmbed.off(EmbedEvent.AuthInit)
----

[#embed-events]
== Embed events

The embed events are generated by the embedded ThoughtSpot application components. All embed events are part of the *EmbedEvent* object; for example,  `EmbedEvent.AuthInit`.

[width="100%" cols="2,7,3,3"]
[options='header']
|====
|Event| Description |SDK version| Embed package
|`AddRemoveColumns`| Is triggered when a column is selected. The event returns the GUIDs of the selected columns.| Version 1.10.0 or later|`SearchEmbed`

`LiveboardEmbed`

`AppEmbed`
|`Alert`
|Is triggered when the embedded object sends an alert.|Version 1.1.0 or later | `SearchEmbed`

`LiveboardEmbed`

`AppEmbed` 

|`AuthInit`
| Indicates if a user authentication has either succeeded or failed. The event returns the `IsLoggedIn` attribute with a boolean value.| Version 1.1.0 or later |`SearchEmbed`

`LiveboardEmbed`

`AppEmbed`
|`AuthExpire`|Indicates if an authenticated session has expired. | Version 1.4.0 or later| `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`


|`CustomAction` |Is triggered when a custom action is initiated. The event returns the custom action ID and the response payload with the answer or Liveboard data.| Version 1.1.0 or later | `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`
|`Data`| Indicates that the answer data or Liveboard object is received. | Version 1.1.0 or later| `SearchEmbed`

`AppEmbed`

|`DataSourceSelected`|Is triggered when one or more data sources are selected. The event returns the GUIDs of the data sources selected.| Version 1.1.0 or later | `SearchEmbed`

`AppEmbed`
|`Drilldown`|Is triggered when the drill down action is executed. The event returns the IDs of the column on which the drill down operation was performed, any additional filters applied during the operation, and the columns that were not filtered.|Version 1.1.0 or later| `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`

|`DialogOpen`|Is triggered when a modal dialog is opened.|Version 1.6.0 or later | `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`

|`DialogClose`|Is triggered when a modal dialog is closed.|Version 1.6.0 or later | `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`

|`Error`|Indicates that an error has occurred. |Version 1.1.0 or later | `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`
|`Init`|Indicates if the embedded object rendering has initialized.| Version 1.1.0 or later| `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`
|`Load`|Indicates if the embedded ThoughtSpot object has loaded. | Version 1.1.0 or later| `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`

|`LiveboardRendered`|Is emitted when a Liveboard has completed rendering. This event can be used as a hook to trigger other events on a rendered Liveboard.|Version 1.9.1 or later | `LiveboardEmbed` 

`AppEmbed`

|`NoCookieAccess`|Is emitted when third-party cookies are blocked by a user's browser.|Version 1.2.0 or later| `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`

|`QueryChanged`|Is triggered when a search query is updated. | Version 1.4.0 or later | `SearchEmbed`

`AppEmbed`
|`RouteChange`|Is triggered when a user navigates from one page to another in the embedded ThoughtSpot app. This event logs the application page URL accessed by a user. | Version 1.7.0 or later| `AppEmbed`

|`VizPointDoubleClick`|Indicates that a double-click event has been triggered on a table or chart. |Version 1.5.0 or later| `LiveboardEmbed`

`AppEmbed`

|====


////
/* To be added in the 1.9.0/8.2.0.cl version of docs


////

[#host-events]
== Host events

The following host events are triggered by the host application, which the embedded ThoughtSpot app can register. All host events are part of the *HostEvent* object; for example, `HostEvent.SetVisibleVizs`. They are sent using the `.trigger(hostEvent, data)` method of the embed component.

[width="100%" cols="2,7,3,3"]
[options='header']
|===
|Event| Description |SDK version|Embed package
|`DrillDown`| Triggers a drill down event when a user clicks on specific points in a column. |Version 1.5.0 or later | `SearchEmbed`

`LiveboardEmbed`

`AppEmbed`
|`Search`| Initiates search action. The event returns the data source GUID and search query details. |Version 1.1.0 or later | `SearchEmbed`

`AppEmbed` 

|`SetVisibleVizs`| Sets the specified visualizations as visible objects on a Liveboard. The visualization IDs that are not passed in the parameter are hidden on the Liveboard. |Version 1.6.0 or later| `LiveboardEmbed`

`AppEmbed` 
|`UpdateRuntimeFilters`| Triggers an event to update runtime filters.|Version 1.8.0 or later | `LiveboardEmbed`

`AppEmbed`
|===

== Related resources

For a complete list of event types that you can register, see  link:{{visualEmbedSDKPrefix}}/enums/embedevent.html[EmbedEvent, window=_blank] and link:{{visualEmbedSDKPrefix}}/enums/HostEvent.html[HostEvent, window=_blank].