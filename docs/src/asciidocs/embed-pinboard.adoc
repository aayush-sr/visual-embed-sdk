= Embed a pinboard
:toc: true

:page-title: Embed Pinboards
:page-pageid: embed-pinboard
:page-description: You can use the PinboardEmbed SDK library to embed a ThoughtSpot pinboard in your app and use it for live insights


This page explains, through an example, how to embed a ThoughtSpot Pinboard in your Web page, portal, or application.

== Import the PinboardEmbed package
Import the PinboardEmbed SDK library to your application environment:

**npm**
[source,javascript]
----
import {
    PinboardEmbed,
    AuthType,
    init,
    prefetch,
    EmbedEvent
}
from '@thoughtspot/visual-embed-sdk';
----

**ES6**
[source,javascript]
----
<script type = 'module'>
    import {
        PinboardEmbed,
        AuthType,
        init,
        prefetch
    }
from 'https://cdn.jsdelivr.net/npm/@thoughtspot/visual-embed-sdk/dist/tsembed.es.js';
----

== Initialize the SDK

Specify the hostname or IP address of your ThoughtSpot application instance and the authentication type.

[source,javascript]
----
init({
    thoughtSpotHost: "https://<hostname>:<port>",
    authType: AuthType.SSO,
});
----
thoughtSpotHost::
_String_. Hostname or IP address of the ThoughtSpot application.

include::{path}/embed-auth-config.adoc[]

== Prefetch static resources (Optional)

To prefetch static resources and load your application fast, set the `callPrefetch` attribute to `true`.

For more information, see xref:prefetch-and-cache.adoc[Prefetch static resources].

== Configure security and login parameters (Optional)

include::{path}/embed-config.adoc[]

== Construct the embed content

[source,JavaScript]
----
const pinboardEmbed = new PinboardEmbed(document.getElementById('ts-embed'), {
    frameParams: {
        width: '100%',
        height: '100%',
    },
    disabledActions: [],
    fullHeight: true,
    disabledActionReason: '<reason for disabling>',
    hiddenActions: [],
    pinboardId: '<%=pinboardGUID%>',
    enableVizTransformations: true,
    preventPinboardFilterRemoval: true,
    runtimeFilters: [],
});
----
frameParams::
Sets the `width` and `height` dimensions to render the pinboard object. You can set the `width` and `height` attribute values in pixels or as a percentage.

fullHeight __Optional__::
_Boolean_. Dynamically resizes the embedded pinboard frame according to the height of the pinboard.

+
If the embedded pinboard does not fit vertically within your application page, a second scroll bar may appear. When `fullHeight` is set to `true`, the embedded pinboard frame is automatically adjusted according to the height of the pinboard, and the second scroll bar does not appear.

+
++++
<a href="{{previewPrefix}}/playground/pinboard?fullHeight=true" id="preview-in-playground" target="_blank">Try it out</a>
++++

////
defaultHeight::
_Integer_. Minimum height to set for embedded objects on a pinboard page and the corresponding visualization pages that a user can navigate to from the pinboard page. The default value is `500` pixels.
////

disabledActions __Optional__::
_Array of strings_. Disables the specified actions. You can use this attribute to restrict user access to certain features.
+
For example, to disable the *Present* action from the *More* menu image:./images/icon-more-10px.png[the more options menu], specify `Action.Present` in the `disabledActions` attribute.

+
----
disabledActions: [Action.Present]
----
+
++++
<a href="{{previewPrefix}}/playground/pinboard?modifyActions=true" id="preview-in-playground" target="_blank">Try it out</a>
++++

disabledActionReason __Optional__::
_String_. The text to show for disabled actions. The text string specified in `disabledActionReason` shows as a tooltip when a user hovers over a disabled action in the embedded UI. For example, if you have disabled the `Download` action and you intend to enable this action for only authorized users, you can specify `disabledActionReason` as `Contact your administrator to enable this feature`.


hiddenActions __Optional__::
_Array of strings_. Hides specified actions from the list of available actions on the embedded *Pinboards* page. You can use this attribute to remove the actions that are not relevant to your application context. Do not use this attribute if `visibleActions` are defined.

+
For example, to hide *Add filters* action from the *More* menu image:./images/icon-more-10px.png[the more options menu], specify `Action.AddFilter` in the `hiddenActions` attribute.

+
----
hiddenActions: [Action.AddFilter]
----

+
++++
<a href="{{previewPrefix}}/playground/pinboard?modifyActions=true" id="preview-in-playground" target="_blank">Try it out</a>
++++

For a complete list of action menu items and the corresponding strings to use for disabling or hiding menu items, see xref:embed-actions.adoc[Disable or hide UI actions].

[NOTE]
====
ThoughtSpot automatically creates a modifiable action ID based on the name you assign to a custom action. For example, if you set the name of a custom action as `Send Email`, ThoughtSpot sets the ID for this action as `send-email` by default. To disable, hide, or show a custom action in the embedded UI, you must specify the ID of the custom action as the action string in the `disabledActions` and `hiddenActions` attributes.
====

pinboardId::
_String_. The GUID of the pinboard.
////
vizId [small]_optional_::
_String_. The Global Unique Identifier (GUID) of a visualization added to the pinboard.
////
enableVizTransformations::
_Boolean_. When set to `true`, it displays the contextual menu for visualizations. The contextual menu allows users to drill down a visualization, apply filters, and view detailed insights.

[#filter-removal]
preventPinboardFilterRemoval::
_Boolean_. When set to true, it disables the filter removal action and thus prevents users from removing the filters applied to a pinboard visualization.

runtimeFilters [small]_optional_::
Runtime filters to be applied when the pinboard page loads.
Runtime filters provide the ability to filter data at the time of retrieval. Runtime filters allow you to apply a filter to a visualization in a pinboard and pass filter specifications in the URL query parameters.
+
Runtime filters do not appear to the user in the pinboard UI. They do not adjust the values of visible pinboard filters, but act as an additional set of filters - both runtime filters and UI filters will be applied within the queries.
+
For example, to sort values equal to `red` in the `Color` column for a visualization in a pinboard, you can pass the runtime filter in the URL query parameters as shown here:

+
[source,javascript]
----
runtimeFilters: [{
    columnName: 'Region',
    operator: RuntimeFilterOp.IN,
    values: ['Midwest', 'East', 'West']
}]
----


columnName;;
__String__. Name of the column to filter by.

operator;;
__String__. The runtime filter operator. For more information about the runtime filter operators, see xref:runtime-filters.adoc#runtimeFilterOp[Runtime filters].

values;;
__String, Integer, or Boolean__. The list of operands. Operators like EQ, LE accept a single operand, whereas other operators like BW and IN accept multiple operands.

+
++++
<a href="{{previewPrefix}}/playground/pinboard?runtimeFilters=true" id="preview-in-playground" target="_blank">Try it out</a>
++++

For more information about the supported data types and how to use runtime filters, see xref:runtime-filters.adoc[Runtime filters].

== Define a method to process callback custom actions payload

include::{path}/callback-payload.adoc[]

== Subscribe to events

Register event listeners.

[source,javascript]
----
pinboardEmbed.on(EmbedEvent.init, showLoader)
pinboardEmbed.on(EmbedEvent.load, hideLoader)
----

For more information, see xref:embed-events.adoc[Event subscription and handling].

== Render the embedded pinboard

Construct the URL for the embedded pinboard:

[source,JavaScript]
----
pinboardEmbed.render();
----

== Test the embedded workflow

* Load the client application.
* Try accessing a pinboard embedded in your application.
* Verify if the embedded content renders correctly on your application page.
* If you have disabled an action, verify if the action appears as disabled on the *Pinboards* page.
* If runtime filters are configured, verify if the filters are applied to the visualizations on the pinboard.

== Additional resources

* For code examples, see xref:code-samples.adoc[Code samples].
* For more information about the SDK APIs and attributes, see xref:sdk-reference.adoc[Visual Embed SDK Reference].
